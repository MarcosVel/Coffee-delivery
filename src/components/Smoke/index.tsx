import { Canvas, Group, Path } from "@shopify/react-native-skia";
import React, { useCallback, useEffect } from "react";
import { View } from "react-native";
import {
  Easing,
  useSharedValue,
  withDelay,
  withSequence,
  withTiming,
} from "react-native-reanimated";
import { styles } from "./styles";

const createAnimation = (delay: number) =>
  withDelay(
    Number(delay),
    withSequence(
      withTiming(0.2, { duration: 1000, easing: Easing.linear }),
      withDelay(200, withTiming(0, { duration: 500, easing: Easing.linear }))
    )
  );

export default function Smoke() {
  const path1Opacity = useSharedValue(0);
  const path2Opacity = useSharedValue(0);
  const path3Opacity = useSharedValue(0);
  const path4Opacity = useSharedValue(0);
  const path5Opacity = useSharedValue(0);
  const path6Opacity = useSharedValue(0);

  const startAnimation = useCallback(() => {
    path1Opacity.value = createAnimation(0);
    path2Opacity.value = createAnimation(1100);
    path3Opacity.value = createAnimation(2200);
    path4Opacity.value = createAnimation(3300);
    path5Opacity.value = createAnimation(4400);
    path6Opacity.value = createAnimation(5500);
  }, [
    path1Opacity,
    path2Opacity,
    path3Opacity,
    path4Opacity,
    path5Opacity,
    path6Opacity,
  ]);

  useEffect(() => {
    startAnimation(); // Start animation immediately on mount

    const intervalId = setInterval(() => {
      startAnimation(); // Call startAnimation every 5 seconds
    }, 8000);

    return () => clearInterval(intervalId); // Cleanup interval on unmount
  }, [startAnimation]);

  return (
    <View style={styles.container}>
      <Canvas style={styles.canvas}>
        <Path
          path="M90.1546 212.587C88.0333 212.083 85.8333 211.55 84.0506 209.887C82.2719 208.226 81.0266 205.082 81.7506 202.32C82.8119 198.264 86.8506 197.847 90.0493 197.704C94.4159 197.491 98.7106 196.426 102.661 194.771C106.752 193.018 110.681 190.463 111.932 185.89C113.172 181.395 110.539 173.67 106.133 171.992C103.38 171.02 100.995 172.859 98.3653 173.679C95.7399 174.47 91.7826 173.302 91.1973 169.591C90.728 166.571 92.908 164.2 92.8093 161.212C92.6906 157.42 89.0413 154.734 86.0226 154.822C83.0093 154.888 80.124 156.571 77.096 156.49C73.3133 156.399 70.0599 153.603 66.6506 152.13C63.2373 150.604 58.7026 151.154 56.3378 155.43C54.5088 158.711 54.4405 163.155 52.0556 165.658C49.2769 168.539 45.84 166.76 42.9588 169.351C39.1561 172.851 39.1749 179.772 42.1227 181.74C45.0915 183.758 49.5337 183.003 53.6602 183.444C57.7806 183.844 62.3653 186.558 62.9733 192.103C63.2893 194.956 62.4573 197.886 62.3986 200.778C62.2719 207.054 65.8599 212.622 70.0986 215.628C70.0986 215.63 70.0986 215.628 70.0986 215.63C73.7999 218.218 79.3106 220.359 83.5093 219.95C85.3746 219.726 92.1346 213.019 90.1546 212.587Z"
          opacity={path1Opacity}
          color="#D7D5D5"
        />

        <Path
          path="M86.8241 212.044C87.7014 209.551 87.5219 206.627 88.5595 204.229C89.8851 201.165 92.8162 199.743 95.2777 197.984C97.7392 196.214 100.107 193.122 99.2311 189.825C98.4005 186.691 95.2544 185.413 92.7381 183.901C90.2258 182.386 87.7816 178.639 89.5139 176.122C90.4824 174.719 92.2644 174.616 93.8273 174.743C98.7301 175.135 104.269 176.457 107.821 173.099C109.482 171.531 110.418 169.115 112.15 167.735C114.919 165.536 118.871 166.543 122.322 166.567C128.741 166.519 134.333 162.36 133.984 155.338C133.662 148.633 128.377 141.001 122.495 136.806C116.626 132.615 110.116 131.214 103.636 129.526C101.307 128.901 98.3802 127.577 98.012 124.859C97.585 121.7 100.963 120.459 103.615 120.355C108.225 120.142 112.776 120.232 117.222 120.655C121.391 121.01 126.113 121.368 127.188 117.425C128.327 113.269 124.638 106.84 120.797 102.58C113.134 94.0084 103.304 88.9668 93.8821 89.7932C94.9288 86.7269 93.5647 82.7621 91.3202 80.072C89.0757 77.3829 86.098 75.7554 83.1831 74.349C76.9821 71.3364 70.4434 68.8967 63.856 70.5171C57.2504 72.0898 50.7127 78.9657 49.8658 86.3598C42.2653 84.6634 33.621 88.6018 26.7943 96.2889C22.6076 100.94 18.717 107.951 19.0162 112.751C19.2566 116.637 22.1826 117.829 25.1979 118.688C28.8805 119.707 32.9628 120.548 37.3422 121.181C39.2916 121.45 41.6851 122.251 41.5147 124.758C41.3393 127.303 38.6871 129.076 36.5775 130.248C30.5997 133.49 24.1391 138.954 22.2942 145.921C20.6187 152.182 23.6715 157.009 28.1625 159.014C32.6443 160.975 38.2439 160.7 43.7267 160.857C45.4002 160.905 47.1366 161.016 48.5504 161.934C49.9632 162.851 50.9683 164.801 50.4977 166.76C49.8486 169.45 47.1031 170.599 45.0321 172.116C39.3088 176.377 37.685 186.293 41.8727 191.42C44.5229 194.687 48.6599 195.929 51.9673 198.575C55.4552 201.366 57.9147 205.619 60.5507 209.612C63.1877 213.605 66.2476 217.577 70.2892 219.291C73.482 220.646 76.7346 219.995 79.5491 217.883C81.5705 216.361 85.8992 214.669 86.8241 212.044Z"
          opacity={path2Opacity}
          color="#D7D5D5"
        />

        <Path
          path="M103.785 201.215C106.125 192.366 101.902 181.523 94.1182 176.807C90.8929 174.875 87.2422 174.009 84.0169 172.122C80.7929 170.23 77.8689 166.747 78.2062 162.797C78.5342 158.934 81.8822 155.543 80.8982 151.807C80.3796 149.83 78.7302 148.386 78.1422 146.438C77.3796 143.915 78.6435 141.081 80.5849 139.502C82.5235 137.922 84.9969 137.362 87.4009 137.023C93.8156 136.11 100.436 136.426 106.293 134.698C112.164 132.929 117.264 128.543 117.117 121.783C116.966 110.351 102.772 99.4246 103.642 88.2433C104.112 82.6473 108.405 79.15 112.833 77.7406C117.27 76.2953 122.112 76.3753 125.784 74.7753C129.461 73.146 131.832 69.0366 129.972 62.8926C127.342 53.8259 117.909 48.25 112.466 40.5313C108.648 34.9206 107.714 28.2647 104.618 22.3393C100.228 13.898 91.9449 8.71663 84.0316 5.58463C76.7969 2.64197 69.3676 0.607315 61.8529 1.50065C54.3249 2.34465 46.6716 6.58062 41.1729 13.774C35.6676 20.9846 32.6129 30.8286 34.4916 36.9886C35.7516 41.1126 39.1009 44.8393 36.8009 50.1846C34.8902 54.578 30.4342 57.0446 27.2489 60.7646C21.2315 67.8713 19.6516 78.2246 22.1142 83.6526C24.6062 89.1393 30.3849 91.326 36.7022 93.1206C39.0222 93.7566 41.7462 94.7459 42.0715 97.5806C42.3035 99.6086 41.1769 101.855 40.1396 103.91C34.3129 115.463 29.6822 127.753 28.9355 139.311C28.1995 150.906 31.9342 161.919 40.7235 167.639C44.9089 170.346 50.1502 171.873 53.4235 176.122C56.1142 179.617 57.0622 184.386 58.7862 188.647C60.5142 192.913 63.6635 197.15 67.9689 197.399C63.0515 201.485 62.0836 210.169 65.9142 215.341C75.0209 227.65 100.585 212.985 103.785 201.215Z"
          opacity={path3Opacity}
          color="#D7D5D5"
        />

        <Path
          path="M103.383 199.804C103.383 199.805 103.383 199.805 103.383 199.804C109.256 194.148 115.723 187.095 114.06 178.65C112.801 172.23 107.277 167.743 102.153 164.085C97.0005 160.396 91.8061 156.793 86.5874 153.343C83.081 151.025 79.5604 148.775 75.9206 146.866C73.1076 145.386 70.0723 143.99 68.3977 141.183C67.539 139.743 67.1102 138.013 67.003 136.254C66.626 130.14 70.1475 123.928 74.8969 120.257C79.6421 116.583 85.4385 115.169 91.1193 114.738C98.609 114.159 106.207 115.081 113.346 114.343C120.501 113.563 127.359 110.911 130.039 104.675C132.703 98.501 129.693 87.4425 122.702 83.3013C120.309 81.9235 117.74 81.543 115.285 80.3515C112.834 79.1538 110.296 76.5679 110.417 73.8403C110.545 71.0463 113.273 69.7987 114.038 67.3316C115.344 63.1279 110.783 58.135 106.849 55.0754C102.929 51.9851 98.3512 47.1773 100.127 42.9659C101.677 39.2895 106.621 39.8935 110.493 40.9253C114.381 41.8805 119.278 42.1206 119.531 38.1492C119.738 34.9887 116.641 31.4745 113.661 29.8847C110.686 28.2796 107.423 27.696 104.64 25.6503C100.746 22.804 98.9371 17.8072 96.3048 13.7247C90.4516 4.58808 80.0476 0.73295 70.375 0.141716C63.7741 -0.34736 57.052 0.312831 50.7274 3.97388C44.3794 7.59024 38.4872 14.7106 35.8098 22.3404C34.6538 25.6222 34.1437 29.107 35.3879 30.8526C37.2145 33.413 41.7425 31.4171 45.6999 30.2372C49.6323 28.9794 54.5731 29.4595 54.8184 33.8178C48.2754 37.4111 41.9324 41.6468 35.8995 46.4725C31.5102 49.9509 27.0921 54.17 24.1978 59.7401C20.3711 67.1873 20.1082 74.7482 22.7192 78.5178C25.3428 82.2989 30.5204 83.1404 36.2995 82.7407C42.0621 82.3104 48.4111 80.6491 54.831 79.5139C53.7265 83.9807 54.0979 88.505 55.8532 92.0881C46.2553 98.1626 38.1157 107.765 32.2792 118.225C29.3585 123.463 26.9225 129.184 26.9026 134.348C26.8802 139.762 29.5221 143.875 32.155 147.979C35.8587 153.736 39.8684 160.021 46.2354 163.363C50.3056 165.495 55.2647 166.396 58.5665 170.017C60.9241 172.604 62.2477 176.384 65.0941 178.398C67.7863 180.307 71.2545 180.247 74.4625 180.839C77.6704 181.428 81.1946 183.268 81.9101 186.822C82.906 191.777 77.8784 195.583 73.4702 196.762C67.3067 198.397 60.0286 199.612 60.0465 208.338C60.0571 214.084 63.2739 218.278 68.2157 219.51C81.4738 222.851 94.4218 208.321 103.383 199.804Z"
          opacity={path4Opacity}
          color="#D7D5D5"
        />

        <Group opacity={path5Opacity}>
          <Path
            path="M88.6719 205.645C87.7591 200.861 84.3088 197.247 81.4856 193.477C78.666 189.703 76.2592 184.649 77.9408 180.103C79.5776 175.673 84.356 173.809 88.6622 173.235C92.9697 172.651 97.6173 172.712 101.091 170.135C106.976 165.8 106.236 155.162 100.974 149.036C95.7142 142.937 87.5436 141.142 80.1066 142.099C77.9275 142.362 75.3525 143.222 74.7411 145.518C73.9639 148.432 76.9929 150.656 79.6224 151.608C82.2531 152.546 85.477 153.825 85.9032 156.81C82.948 157.968 79.9372 159.231 77.4941 161.439C75.0498 163.646 73.2278 166.985 73.4651 170.391C73.6527 173.075 75.068 175.712 74.3743 178.318C72.9397 183.66 64.6347 183.262 62.6989 188.471C61.3684 192.016 63.8913 195.566 65.2424 199.032C66.5656 202.418 66.7836 206.211 67.516 209.832C68.2496 213.453 69.7 217.205 72.597 219.098C78.6902 223.083 90.0641 213.01 88.6719 205.645Z"
            color="#D7D5D5"
          />
          <Path
            path="M55.7856 152.471C51.2941 152.931 46.5714 150.909 45.5823 146.49C44.494 141.65 48.0278 135.384 46.1973 130.941C44.6986 127.321 40.4407 126.896 37.3221 125.538C32.7726 123.543 30.3053 119.014 28.0571 114.807C26.7799 112.412 25.5124 109.865 26.1879 106.288C27.1915 100.908 32.0752 95.686 36.7241 92.8543C41.2749 90.0263 46.4491 88.3964 50.529 90.2252C54.6113 92.0454 56.8727 98.0532 54.2832 103.108C52.6488 106.32 49.6343 108.507 47.23 111.201C44.8208 113.896 42.8378 117.983 44.2022 120.538C46.155 124.202 53.0459 121.548 55.2771 125.465C56.8328 128.198 55.0652 132.498 56.5337 135.313H56.535C58.886 139.795 68.0881 136.787 69.1171 142.788C70.1704 148.986 59.5616 151.972 55.7856 152.471Z"
            color="#D7D5D5"
          />
          <Path
            path="M113.046 86.6731C117.122 89.1531 122.148 92.4614 124.776 90.1815C127.257 88.0423 125.496 82.4395 123.644 77.9113C119.013 66.7871 113.484 54.0475 103.616 48.4133C98.8114 45.7162 93.544 45.2905 88.4447 44.1203C83.3455 42.9051 77.8952 40.5112 76.0878 35.601C73.9619 29.8345 77.6652 23.1949 81.2402 18.03C85.0973 17.671 89.2583 17.5243 92.1045 15.2044C94.9471 12.9075 95.2267 7.18833 91.7026 5.09883C89.1699 3.62296 86.1784 4.98968 84.2765 7.03674C82.3734 9.07895 81.0562 11.713 78.9667 13.663C75.3662 17.0137 70.146 17.9548 65.4729 18.3962C60.7998 18.8086 56.2236 18.8437 51.7382 20.9344C45.0882 23.9953 39.2275 31.7227 36.3232 39.5641C34.3522 44.9437 34.1598 51.0946 37.9006 51.0291C39.3982 51.0194 41.1923 50.0298 42.8315 49.8443C46.8388 49.4198 49.0167 53.5624 52.875 54.5557C56.7163 55.561 61.5165 53.5152 65.8869 51.6064C70.2513 49.6818 74.9328 47.7984 79.3129 49.0997C83.6954 50.4033 87.0695 56.3056 84.5441 60.1899C82.8322 62.8445 79.3359 63.5224 76.2439 63.6777C73.1544 63.8147 69.922 63.6862 67.1278 65.3973C64.3337 67.1133 62.4451 71.4875 64.3785 73.6437C61.4257 72.8603 57.9706 76.2305 57.3495 79.6382C56.726 83.0435 58.3325 86.0522 60.6763 87.8628C68.9353 94.3532 75.5866 84.6467 84.3564 82.0503C93.8272 79.2913 104.104 81.1213 113.046 86.6731Z"
            color="#D7D5D5"
          />
          <Path
            path="M72.3778 7.79473C73.9904 6.30552 74.7712 3.93224 74.2846 1.91671C71.1115 0.81193 67.6418 0.695519 64.2496 1.62324C61.7254 2.29024 58.6758 4.43309 58.6007 7.0671C58.5523 8.69456 59.7944 9.71932 61.2339 9.9364C62.6479 10.0116 70.7773 7.89538 72.3778 7.79473Z"
            color="#D7D5D5"
          />
        </Group>

        <Group opacity={path6Opacity}>
          <Path
            path="M88.2183 213.785C87.2857 212.481 85.9469 211.61 84.6397 210.77C83.8982 210.293 83.0035 209.801 82.2177 210.182C81.7356 210.416 81.4193 210.93 81.189 211.452C76.1488 223.001 94.0418 221.9 88.2183 213.785Z"
            color="#D7D5D5"
          />
          <Path
            path="M76.8477 186.11C78.9027 182.568 83.1431 181.649 86.8584 180.698C89.2032 180.093 91.567 179.316 93.4246 177.733C95.2822 176.147 96.554 173.6 96.1199 171.007C95.7365 168.715 94.0826 166.75 92.1465 165.634C90.2092 164.521 88.0137 164.148 85.8575 163.997C83.1976 163.805 80.1289 164.15 78.6167 166.518C77.8448 167.725 77.598 169.303 76.654 170.361C74.9407 172.281 71.9885 171.563 69.6297 172.392C66.265 173.573 64.4947 177.883 64.7427 181.657C64.992 185.435 66.7673 188.833 68.4946 192.12C69.7638 194.509 74.1878 204.07 76.7047 199.779C78.8053 196.213 74.2561 190.582 76.8477 186.11Z"
            color="#D7D5D5"
          />
          <Path
            path="M111.871 156.197C114.071 153.917 114.682 149.746 112.57 146.54C110.16 142.878 105.646 142.219 101.781 142.219C100.925 142.901 101.366 144.527 102.156 145.517C102.946 146.507 104.02 147.28 104.551 148.434C108.244 156.229 94.2888 150.886 96.4628 156.197C99.1253 162.297 109.37 158.684 111.871 156.197Z"
            color="#D7D5D5"
          />
          <Path
            path="M51.6234 131.949C51.2121 129.552 48.4535 128.402 46.325 129.778C45.0761 131.557 45.0469 134.051 46.2579 135.352C47.4677 136.657 50.0024 133.291 51.6234 131.949Z"
            color="#D7D5D5"
          />
          <Path
            path="M38.5555 89.4388C39.9487 87.1562 42.2214 85.6913 44.3726 85.0641C46.5212 84.4307 48.6421 84.4687 50.825 84.2415C55.7019 83.7159 61.1482 81.7457 64.9875 77.7862C65.9391 76.7998 66.8413 75.3678 66.339 74.1923C65.8973 73.164 64.5686 72.9545 63.4753 73.3112C62.3845 73.6654 61.4076 74.4284 60.3497 74.9298C57.4443 76.3072 54.3808 75.6369 51.8246 74.7305C49.2697 73.8203 46.8034 72.6714 43.974 73.2516C39.3717 74.205 35.2337 79.3375 31.7374 84.1209C30.2695 86.128 28.7485 88.3534 28.2107 90.5813C27.4945 93.543 28.7346 95.4142 29.9722 97.0468C30.9858 98.3836 32.098 99.8016 33.9063 99.9882C40.4979 100.831 36.4638 92.9223 38.5555 89.4388Z"
            color="#D7D5D5"
          />
          <Path
            path="M97.0264 53.8894C102.47 52.2746 108.516 51.5954 113.812 56.3535C115.832 58.1574 117.587 60.5605 119.563 62.3785C121.546 64.1837 123.977 65.3579 124.754 63.9095C125.632 62.2744 124.008 58.4304 122.241 55.574C115.434 44.32 104.933 38.1579 94.6309 37.3721C92.7796 37.1995 90.8372 37.1893 89.3339 38.1427C87.8293 39.0974 86.9574 41.2809 87.8875 43.114C88.4936 44.3073 89.7616 45.2759 89.8831 46.567C90.0817 48.6337 87.4661 49.007 85.5376 49.2977C82.6867 49.4233 70.488 59.4574 75.7129 62.3772C78.6803 63.5261 94.3652 54.1547 97.0264 53.8894Z"
            color="#D7D5D5"
          />
          <Path
            path="M62.4945 15.1625C60.9963 13.907 58.6135 13.9997 56.6609 15.2958C54.7071 16.5818 53.2279 18.9138 52.6876 21.1735C52.3054 22.7781 52.4206 24.4615 53.4241 25.2397C54.5591 26.1207 56.418 25.6383 58.0909 25.2041C60.3661 24.5922 63.1791 24.7344 64.1902 22.0101C64.3648 21.5277 62.7527 15.3694 62.4945 15.1625Z"
            color="#D7D5D5"
          />
          <Path
            path="M92.2932 1.23376C92.2919 1.23376 92.2919 1.23376 92.2919 1.23376C92.0743 1.30231 91.868 1.39625 91.6732 1.51685C87.9541 3.89206 91.696 6.40183 94.5571 5.26184C98.1964 3.90095 96.2767 0.0137803 92.2932 1.23376Z"
            color="#D7D5D5"
          />
        </Group>
      </Canvas>
    </View>
  );
}
